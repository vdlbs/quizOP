import { useState } from "react";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";

const questions = [
  {
    question: "Quel membre de l'√©quipage de Roger est le seul encore en vie √† conna√Ætre toute la v√©ritable histoire du si√®cle oubli√© ?",
    options: ["Scopper Gaban", "Silvers Rayleigh", "Shanks", "Crocus"],
    answer: "Silvers Rayleigh",
  },
  {
    question: "Lors de la bataille de Marineford, quel est le nom exact de la technique de Barbe Blanche qui a failli fendre la mer enti√®re ?",
    options: [
      "Gekishin (Tremblement sismique)",
      "Shima Yurashi (Secousse d'√Æle)",
      "Kaishin (Onde destructrice)",
      "Tenchi Hakai (Destruction c√©leste)",
    ],
    answer: "Shima Yurashi (Secousse d'√Æle)",
  },
  {
    question: "Dans le chapitre o√π Nico Robin lit le premier Pon√©glyphe √† Skypiea, quel dieu est mentionn√© dans l'inscription ?",
    options: ["Uranus", "Poseidon", "Pluton", "Nika"],
    answer: "Poseidon",
  },
  {
    question: "Quel fruit du d√©mon a √©t√© utilis√© pour cr√©er les Pacifistas selon les recherches de Vegapunk ?",
    options: [
      "Kizaru - Pika Pika no Mi",
      "Kuma - Nikyu Nikyu no Mi",
      "Caesar - Gasu Gasu no Mi",
      "Doflamingo - Ito Ito no Mi",
    ],
    answer: "Kizaru - Pika Pika no Mi",
  },
  {
    question: "Dans le flashback d‚ÄôOhara, quel amiral en devenir a √©pargn√© Nico Robin lors de la Buster Call ?",
    options: ["Aokiji", "Akainu", "Fujitora", "Kizaru"],
    answer: "Aokiji",
  },
  {
    question: "Quel est le nom exact du journal que lit souvent Nico Robin pour obtenir des informations historiques ?",
    options: ["Morning Sun", "South Bird Times", "World Economy News", "Revue Historique du Si√®cle"],
    answer: "World Economy News",
  },
  {
    question: "Lors du combat entre Kaido et Luffy √† Wano, quel est le nom officiel de la forme o√π Luffy utilise le pouvoir √©veill√© de son fruit ?",
    options: ["Gear 5 - Nika", "Gear 5 - Sun God", "Gear 5 - Joy Boy", "Gear 5 - Dawn"],
    answer: "Gear 5 - Nika",
  },
];

export default function OnePieceQuiz() {
  const [current, setCurrent] = useState(0);
  const [score, setScore] = useState(0);
  const [finished, setFinished] = useState(false);

  const handleAnswer = (option) => {
    if (option === questions[current].answer) {
      setScore(score + 1);
    }
    if (current + 1 < questions.length) {
      setCurrent(current + 1);
    } else {
      setFinished(true);
    }
  };

  return (
    <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-r from-blue-800 to-indigo-900 text-white p-6">
      <h1 className="text-3xl font-bold mb-6">‚öîÔ∏è One Piece Quiz üè¥‚Äç‚ò†Ô∏è</h1>

      {!finished ? (
        <Card className="w-full max-w-md bg-white text-black shadow-xl rounded-2xl">
          <CardContent className="p-6">
            <h2 className="text-xl font-semibold mb-4">
              {questions[current].question}
            </h2>
            <div className="grid gap-3">
              {questions[current].options.map((option, i) => (
                <Button
                  key={i}
                  onClick={() => handleAnswer(option)}
                  className="w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl"
                >
                  {option}
                </Button>
              ))}
            </div>
          </CardContent>
        </Card>
      ) : (
        <Card className="w-full max-w-md bg-white text-black shadow-xl rounded-2xl">
          <CardContent className="p-6 text-center">
            <h2 className="text-2xl font-bold mb-4">üéâ Quiz termin√© !</h2>
            <p className="text-lg mb-2">Ton score : {score}/{questions.length}</p>
            <Button
              onClick={() => {
                setCurrent(0);
                setScore(0);
                setFinished(false);
              }}
              className="bg-green-600 hover:bg-green-700 text-white rounded-xl"
            >
              Rejouer
            </Button>
          </CardContent>
        </Card>
      )}
    </div>
  );
}
